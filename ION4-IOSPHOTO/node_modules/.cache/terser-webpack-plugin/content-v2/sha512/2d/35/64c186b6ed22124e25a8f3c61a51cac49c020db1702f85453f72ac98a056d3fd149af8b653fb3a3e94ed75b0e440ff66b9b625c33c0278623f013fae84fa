{"code":"(this.webpackJsonpPHOTO=this.webpackJsonpPHOTO||[]).push([[42],{134:function(e,t,r){\"use strict\";r.r(t),r.d(t,\"CameraWeb\",(function(){return d})),r.d(t,\"Camera\",(function(){return m}));var a=r(2),n=r.n(a),c=r(11),i=r(5),o=r(6),s=r(7),u=r(8),p=r(52),l=r(49),d=function(e){Object(s.a)(r,e);var t=Object(u.a)(r);function r(){return Object(i.a)(this,r),t.apply(this,arguments)}return Object(o.a)(r,[{key:\"getPhoto\",value:function(){var e=Object(c.a)(n.a.mark((function e(t){var r=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt(\"return\",new Promise(function(){var e=Object(c.a)(n.a.mark((function e(a,i){var o;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t.webUseInput||t.source===l.c.Photos?r.fileInputExperience(t,a):t.source===l.c.Prompt?((o=document.querySelector(\"pwa-action-sheet\"))||(o=document.createElement(\"pwa-action-sheet\"),document.body.appendChild(o)),o.header=t.promptLabelHeader||\"Photo\",o.cancelable=!1,o.options=[{title:t.promptLabelPhoto||\"From Photos\"},{title:t.promptLabelPicture||\"Take Picture\"}],o.addEventListener(\"onSelection\",function(){var e=Object(c.a)(n.a.mark((function e(c){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:0===c.detail?r.fileInputExperience(t,a):r.cameraExperience(t,a,i);case 2:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}())):r.cameraExperience(t,a,i);case 1:case\"end\":return e.stop()}}),e)})));return function(t,r){return e.apply(this,arguments)}}()));case 1:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()},{key:\"cameraExperience\",value:function(){var e=Object(c.a)(n.a.mark((function e(t,r,a){var i,o=this;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!customElements.get(\"pwa-camera-modal\")){e.next=15;break}return i=document.createElement(\"pwa-camera-modal\"),document.body.appendChild(i),e.prev=3,e.next=6,i.componentOnReady();case 6:i.addEventListener(\"onPhoto\",function(){var e=Object(c.a)(n.a.mark((function e(c){var s;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null!==(s=c.detail)){e.next=5;break}a(new p.a(\"User cancelled photos app\")),e.next=14;break;case 5:if(!(s instanceof Error)){e.next=9;break}a(s),e.next=14;break;case 9:return e.t0=r,e.next=12,o._getCameraPhoto(s,t);case 12:e.t1=e.sent,(0,e.t0)(e.t1);case 14:i.dismiss(),document.body.removeChild(i);case 16:case\"end\":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),i.present(),e.next=13;break;case 10:e.prev=10,e.t0=e.catch(3),this.fileInputExperience(t,r);case 13:e.next=17;break;case 15:console.error(\"Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements.\"),this.fileInputExperience(t,r);case 17:case\"end\":return e.stop()}}),e,this,[[3,10]])})));return function(t,r,a){return e.apply(this,arguments)}}()},{key:\"fileInputExperience\",value:function(e,t){var r=document.querySelector(\"#_capacitor-camera-input\"),a=function(){var e;null===(e=r.parentNode)||void 0===e||e.removeChild(r)};r||((r=document.createElement(\"input\")).id=\"_capacitor-camera-input\",r.type=\"file\",r.hidden=!0,document.body.appendChild(r),r.addEventListener(\"change\",(function(n){var c=r.files[0],i=\"jpeg\";if(\"image/png\"===c.type?i=\"png\":\"image/gif\"===c.type&&(i=\"gif\"),\"dataUrl\"===e.resultType||\"base64\"===e.resultType){var o=new FileReader;o.addEventListener(\"load\",(function(){if(\"dataUrl\"===e.resultType)t({dataUrl:o.result,format:i});else if(\"base64\"===e.resultType){var r=o.result.split(\",\")[1];t({base64String:r,format:i})}a()})),o.readAsDataURL(c)}else t({webPath:URL.createObjectURL(c),format:i}),a()}))),r.accept=\"image/*\",r.capture=!0,e.source===l.c.Photos||e.source===l.c.Prompt?r.removeAttribute(\"capture\"):e.direction===l.a.Front?r.capture=\"user\":e.direction===l.a.Rear&&(r.capture=\"environment\"),r.click()}},{key:\"_getCameraPhoto\",value:function(e,t){return new Promise((function(r,a){var n=new FileReader,c=e.type.split(\"/\")[1];\"uri\"===t.resultType?r({webPath:URL.createObjectURL(e),format:c}):(n.readAsDataURL(e),n.onloadend=function(){var e=n.result;\"dataUrl\"===t.resultType?r({dataUrl:e,format:c}):r({base64String:e.split(\",\")[1],format:c})},n.onerror=function(e){a(e)})}))}},{key:\"checkPermissions\",value:function(){var e=Object(c.a)(n.a.mark((function e(){var t;return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(\"undefined\"!==typeof navigator&&navigator.permissions){e.next=2;break}throw this.unavailable(\"Permissions API not available in this browser\");case 2:return e.prev=2,e.next=5,window.navigator.permissions.query({name:\"camera\"});case 5:return t=e.sent,e.abrupt(\"return\",{camera:t.state,photos:\"granted\"});case 9:throw e.prev=9,e.t0=e.catch(2),this.unavailable(\"Camera permissions are not available in this browser\");case 12:case\"end\":return e.stop()}}),e,this,[[2,9]])})));return function(){return e.apply(this,arguments)}}()},{key:\"requestPermissions\",value:function(){var e=Object(c.a)(n.a.mark((function e(){return n.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:throw this.unimplemented(\"Not implemented on web.\");case 1:case\"end\":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()}]),r}(p.b),m=new d}}]);","name":"static/js/42.3726b32d.chunk.js","map":{"version":3,"sources":["static/js/42.3726b32d.chunk.js"],"names":["this","push","module","__webpack_exports__","__webpack_require__","r","d","CameraWeb","Camera","_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__","_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default","n","_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__","_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__","_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__","_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__","_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__","_capacitor_core__WEBPACK_IMPORTED_MODULE_6__","_definitions__WEBPACK_IMPORTED_MODULE_7__","_WebPlugin","Object","_super","apply","arguments","key","value","_getPhoto","a","mark","_callee3","options","_this","wrap","_context3","prev","next","abrupt","Promise","_ref","_callee2","resolve","reject","actionSheet","_context2","webUseInput","source","Photos","fileInputExperience","Prompt","document","querySelector","createElement","body","appendChild","header","promptLabelHeader","cancelable","title","promptLabelPhoto","promptLabelPicture","addEventListener","_ref2","_callee","e","_context","detail","cameraExperience","stop","_x4","_x2","_x3","_x","_cameraExperience","_callee5","cameraModal","_this2","_context5","customElements","get","componentOnReady","_ref3","_callee4","photo","_context4","Error","t0","_getCameraPhoto","t1","sent","dismiss","removeChild","_x8","present","console","error","_x5","_x6","_x7","input","cleanup","_a","parentNode","id","type","hidden","_e","file","files","format","resultType","reader","FileReader","dataUrl","result","b64","split","base64String","readAsDataURL","webPath","URL","createObjectURL","accept","capture","removeAttribute","direction","Front","Rear","click","onloadend","onerror","_checkPermissions","_callee6","permission","_context6","navigator","permissions","unavailable","window","query","name","camera","state","photos","_requestPermissions","_callee7","_context7","unimplemented"],"mappings":"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"},"input":"(this[\"webpackJsonpPHOTO\"] = this[\"webpackJsonpPHOTO\"] || []).push([[42],{\n\n/***/ 134:\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"CameraWeb\", function() { return CameraWeb; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"Camera\", function() { return Camera; });\n/* harmony import */ var _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(2);\n/* harmony import */ var _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(11);\n/* harmony import */ var _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(5);\n/* harmony import */ var _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(6);\n/* harmony import */ var _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(7);\n/* harmony import */ var _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(8);\n/* harmony import */ var _capacitor_core__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(52);\n/* harmony import */ var _definitions__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(49);\n\n\n\n\n\n\n\n\nvar CameraWeb = /*#__PURE__*/function (_WebPlugin) {\n  Object(_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_inherits__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"a\"])(CameraWeb, _WebPlugin);\n\n  var _super = Object(_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createSuper__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(CameraWeb);\n\n  function CameraWeb() {\n    Object(_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_classCallCheck__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"])(this, CameraWeb);\n\n    return _super.apply(this, arguments);\n  }\n\n  Object(_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_createClass__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"])(CameraWeb, [{\n    key: \"getPhoto\",\n    value: function () {\n      var _getPhoto = Object(_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee3(options) {\n        var _this = this;\n\n        return _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee3$(_context3) {\n          while (1) {\n            switch (_context3.prev = _context3.next) {\n              case 0:\n                return _context3.abrupt(\"return\", new Promise( /*#__PURE__*/function () {\n                  var _ref = Object(_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee2(resolve, reject) {\n                    var actionSheet;\n                    return _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee2$(_context2) {\n                      while (1) {\n                        switch (_context2.prev = _context2.next) {\n                          case 0:\n                            if (options.webUseInput || options.source === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraSource */ \"c\"].Photos) {\n                              _this.fileInputExperience(options, resolve);\n                            } else if (options.source === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraSource */ \"c\"].Prompt) {\n                              actionSheet = document.querySelector('pwa-action-sheet');\n\n                              if (!actionSheet) {\n                                actionSheet = document.createElement('pwa-action-sheet');\n                                document.body.appendChild(actionSheet);\n                              }\n\n                              actionSheet.header = options.promptLabelHeader || 'Photo';\n                              actionSheet.cancelable = false;\n                              actionSheet.options = [{\n                                title: options.promptLabelPhoto || 'From Photos'\n                              }, {\n                                title: options.promptLabelPicture || 'Take Picture'\n                              }];\n                              actionSheet.addEventListener('onSelection', /*#__PURE__*/function () {\n                                var _ref2 = Object(_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee(e) {\n                                  var selection;\n                                  return _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee$(_context) {\n                                    while (1) {\n                                      switch (_context.prev = _context.next) {\n                                        case 0:\n                                          selection = e.detail;\n\n                                          if (selection === 0) {\n                                            _this.fileInputExperience(options, resolve);\n                                          } else {\n                                            _this.cameraExperience(options, resolve, reject);\n                                          }\n\n                                        case 2:\n                                        case \"end\":\n                                          return _context.stop();\n                                      }\n                                    }\n                                  }, _callee);\n                                }));\n\n                                return function (_x4) {\n                                  return _ref2.apply(this, arguments);\n                                };\n                              }());\n                            } else {\n                              _this.cameraExperience(options, resolve, reject);\n                            }\n\n                          case 1:\n                          case \"end\":\n                            return _context2.stop();\n                        }\n                      }\n                    }, _callee2);\n                  }));\n\n                  return function (_x2, _x3) {\n                    return _ref.apply(this, arguments);\n                  };\n                }()));\n\n              case 1:\n              case \"end\":\n                return _context3.stop();\n            }\n          }\n        }, _callee3);\n      }));\n\n      function getPhoto(_x) {\n        return _getPhoto.apply(this, arguments);\n      }\n\n      return getPhoto;\n    }()\n  }, {\n    key: \"cameraExperience\",\n    value: function () {\n      var _cameraExperience = Object(_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee5(options, resolve, reject) {\n        var _this2 = this;\n\n        var cameraModal;\n        return _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee5$(_context5) {\n          while (1) {\n            switch (_context5.prev = _context5.next) {\n              case 0:\n                if (!customElements.get('pwa-camera-modal')) {\n                  _context5.next = 15;\n                  break;\n                }\n\n                cameraModal = document.createElement('pwa-camera-modal');\n                document.body.appendChild(cameraModal);\n                _context5.prev = 3;\n                _context5.next = 6;\n                return cameraModal.componentOnReady();\n\n              case 6:\n                cameraModal.addEventListener('onPhoto', /*#__PURE__*/function () {\n                  var _ref3 = Object(_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee4(e) {\n                    var photo;\n                    return _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee4$(_context4) {\n                      while (1) {\n                        switch (_context4.prev = _context4.next) {\n                          case 0:\n                            photo = e.detail;\n\n                            if (!(photo === null)) {\n                              _context4.next = 5;\n                              break;\n                            }\n\n                            reject(new _capacitor_core__WEBPACK_IMPORTED_MODULE_6__[/* CapacitorException */ \"a\"]('User cancelled photos app'));\n                            _context4.next = 14;\n                            break;\n\n                          case 5:\n                            if (!(photo instanceof Error)) {\n                              _context4.next = 9;\n                              break;\n                            }\n\n                            reject(photo);\n                            _context4.next = 14;\n                            break;\n\n                          case 9:\n                            _context4.t0 = resolve;\n                            _context4.next = 12;\n                            return _this2._getCameraPhoto(photo, options);\n\n                          case 12:\n                            _context4.t1 = _context4.sent;\n                            (0, _context4.t0)(_context4.t1);\n\n                          case 14:\n                            cameraModal.dismiss();\n                            document.body.removeChild(cameraModal);\n\n                          case 16:\n                          case \"end\":\n                            return _context4.stop();\n                        }\n                      }\n                    }, _callee4);\n                  }));\n\n                  return function (_x8) {\n                    return _ref3.apply(this, arguments);\n                  };\n                }());\n                cameraModal.present();\n                _context5.next = 13;\n                break;\n\n              case 10:\n                _context5.prev = 10;\n                _context5.t0 = _context5[\"catch\"](3);\n                this.fileInputExperience(options, resolve);\n\n              case 13:\n                _context5.next = 17;\n                break;\n\n              case 15:\n                console.error(\"Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements.\");\n                this.fileInputExperience(options, resolve);\n\n              case 17:\n              case \"end\":\n                return _context5.stop();\n            }\n          }\n        }, _callee5, this, [[3, 10]]);\n      }));\n\n      function cameraExperience(_x5, _x6, _x7) {\n        return _cameraExperience.apply(this, arguments);\n      }\n\n      return cameraExperience;\n    }()\n  }, {\n    key: \"fileInputExperience\",\n    value: function fileInputExperience(options, resolve) {\n      var input = document.querySelector('#_capacitor-camera-input');\n\n      var cleanup = function cleanup() {\n        var _a;\n\n        (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n      };\n\n      if (!input) {\n        input = document.createElement('input');\n        input.id = '_capacitor-camera-input';\n        input.type = 'file';\n        input.hidden = true;\n        document.body.appendChild(input);\n        input.addEventListener('change', function (_e) {\n          var file = input.files[0];\n          var format = 'jpeg';\n\n          if (file.type === 'image/png') {\n            format = 'png';\n          } else if (file.type === 'image/gif') {\n            format = 'gif';\n          }\n\n          if (options.resultType === 'dataUrl' || options.resultType === 'base64') {\n            var reader = new FileReader();\n            reader.addEventListener('load', function () {\n              if (options.resultType === 'dataUrl') {\n                resolve({\n                  dataUrl: reader.result,\n                  format: format\n                });\n              } else if (options.resultType === 'base64') {\n                var b64 = reader.result.split(',')[1];\n                resolve({\n                  base64String: b64,\n                  format: format\n                });\n              }\n\n              cleanup();\n            });\n            reader.readAsDataURL(file);\n          } else {\n            resolve({\n              webPath: URL.createObjectURL(file),\n              format: format\n            });\n            cleanup();\n          }\n        });\n      }\n\n      input.accept = 'image/*';\n      input.capture = true;\n\n      if (options.source === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraSource */ \"c\"].Photos || options.source === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraSource */ \"c\"].Prompt) {\n        input.removeAttribute('capture');\n      } else if (options.direction === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraDirection */ \"a\"].Front) {\n        input.capture = 'user';\n      } else if (options.direction === _definitions__WEBPACK_IMPORTED_MODULE_7__[/* CameraDirection */ \"a\"].Rear) {\n        input.capture = 'environment';\n      }\n\n      input.click();\n    }\n  }, {\n    key: \"_getCameraPhoto\",\n    value: function _getCameraPhoto(photo, options) {\n      return new Promise(function (resolve, reject) {\n        var reader = new FileReader();\n        var format = photo.type.split('/')[1];\n\n        if (options.resultType === 'uri') {\n          resolve({\n            webPath: URL.createObjectURL(photo),\n            format: format\n          });\n        } else {\n          reader.readAsDataURL(photo);\n\n          reader.onloadend = function () {\n            var r = reader.result;\n\n            if (options.resultType === 'dataUrl') {\n              resolve({\n                dataUrl: r,\n                format: format\n              });\n            } else {\n              resolve({\n                base64String: r.split(',')[1],\n                format: format\n              });\n            }\n          };\n\n          reader.onerror = function (e) {\n            reject(e);\n          };\n        }\n      });\n    }\n  }, {\n    key: \"checkPermissions\",\n    value: function () {\n      var _checkPermissions = Object(_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee6() {\n        var permission;\n        return _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee6$(_context6) {\n          while (1) {\n            switch (_context6.prev = _context6.next) {\n              case 0:\n                if (!(typeof navigator === 'undefined' || !navigator.permissions)) {\n                  _context6.next = 2;\n                  break;\n                }\n\n                throw this.unavailable('Permissions API not available in this browser');\n\n              case 2:\n                _context6.prev = 2;\n                _context6.next = 5;\n                return window.navigator.permissions.query({\n                  name: 'camera'\n                });\n\n              case 5:\n                permission = _context6.sent;\n                return _context6.abrupt(\"return\", {\n                  camera: permission.state,\n                  photos: 'granted'\n                });\n\n              case 9:\n                _context6.prev = 9;\n                _context6.t0 = _context6[\"catch\"](2);\n                throw this.unavailable('Camera permissions are not available in this browser');\n\n              case 12:\n              case \"end\":\n                return _context6.stop();\n            }\n          }\n        }, _callee6, this, [[2, 9]]);\n      }));\n\n      function checkPermissions() {\n        return _checkPermissions.apply(this, arguments);\n      }\n\n      return checkPermissions;\n    }()\n  }, {\n    key: \"requestPermissions\",\n    value: function () {\n      var _requestPermissions = Object(_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_helpers_esm_asyncToGenerator__WEBPACK_IMPORTED_MODULE_1__[/* default */ \"a\"])( /*#__PURE__*/_Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.mark(function _callee7() {\n        return _Users_tm_Documents_CODE_ION_ION4_IOSPHOTO_node_modules_babel_preset_react_app_node_modules_babel_runtime_regenerator__WEBPACK_IMPORTED_MODULE_0___default.a.wrap(function _callee7$(_context7) {\n          while (1) {\n            switch (_context7.prev = _context7.next) {\n              case 0:\n                throw this.unimplemented('Not implemented on web.');\n\n              case 1:\n              case \"end\":\n                return _context7.stop();\n            }\n          }\n        }, _callee7, this);\n      }));\n\n      function requestPermissions() {\n        return _requestPermissions.apply(this, arguments);\n      }\n\n      return requestPermissions;\n    }()\n  }]);\n\n  return CameraWeb;\n}(_capacitor_core__WEBPACK_IMPORTED_MODULE_6__[/* WebPlugin */ \"b\"]);\nvar Camera = new CameraWeb();\n\n\n/***/ })\n\n}]);","inputSourceMap":{"version":3,"sources":["../../src/web.ts"],"names":[],"mappings":"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","file":"x","sourcesContent":["import { WebPlugin, CapacitorException } from '@capacitor/core';\nimport { CameraSource, CameraDirection } from './definitions';\nexport class CameraWeb extends WebPlugin {\n    async getPhoto(options) {\n        // eslint-disable-next-line no-async-promise-executor\n        return new Promise(async (resolve, reject) => {\n            if (options.webUseInput || options.source === CameraSource.Photos) {\n                this.fileInputExperience(options, resolve);\n            }\n            else if (options.source === CameraSource.Prompt) {\n                let actionSheet = document.querySelector('pwa-action-sheet');\n                if (!actionSheet) {\n                    actionSheet = document.createElement('pwa-action-sheet');\n                    document.body.appendChild(actionSheet);\n                }\n                actionSheet.header = options.promptLabelHeader || 'Photo';\n                actionSheet.cancelable = false;\n                actionSheet.options = [\n                    { title: options.promptLabelPhoto || 'From Photos' },\n                    { title: options.promptLabelPicture || 'Take Picture' },\n                ];\n                actionSheet.addEventListener('onSelection', async (e) => {\n                    const selection = e.detail;\n                    if (selection === 0) {\n                        this.fileInputExperience(options, resolve);\n                    }\n                    else {\n                        this.cameraExperience(options, resolve, reject);\n                    }\n                });\n            }\n            else {\n                this.cameraExperience(options, resolve, reject);\n            }\n        });\n    }\n    async cameraExperience(options, resolve, reject) {\n        if (customElements.get('pwa-camera-modal')) {\n            const cameraModal = document.createElement('pwa-camera-modal');\n            document.body.appendChild(cameraModal);\n            try {\n                await cameraModal.componentOnReady();\n                cameraModal.addEventListener('onPhoto', async (e) => {\n                    const photo = e.detail;\n                    if (photo === null) {\n                        reject(new CapacitorException('User cancelled photos app'));\n                    }\n                    else if (photo instanceof Error) {\n                        reject(photo);\n                    }\n                    else {\n                        resolve(await this._getCameraPhoto(photo, options));\n                    }\n                    cameraModal.dismiss();\n                    document.body.removeChild(cameraModal);\n                });\n                cameraModal.present();\n            }\n            catch (e) {\n                this.fileInputExperience(options, resolve);\n            }\n        }\n        else {\n            console.error(`Unable to load PWA Element 'pwa-camera-modal'. See the docs: https://capacitorjs.com/docs/pwa-elements.`);\n            this.fileInputExperience(options, resolve);\n        }\n    }\n    fileInputExperience(options, resolve) {\n        let input = document.querySelector('#_capacitor-camera-input');\n        const cleanup = () => {\n            var _a;\n            (_a = input.parentNode) === null || _a === void 0 ? void 0 : _a.removeChild(input);\n        };\n        if (!input) {\n            input = document.createElement('input');\n            input.id = '_capacitor-camera-input';\n            input.type = 'file';\n            input.hidden = true;\n            document.body.appendChild(input);\n            input.addEventListener('change', (_e) => {\n                const file = input.files[0];\n                let format = 'jpeg';\n                if (file.type === 'image/png') {\n                    format = 'png';\n                }\n                else if (file.type === 'image/gif') {\n                    format = 'gif';\n                }\n                if (options.resultType === 'dataUrl' ||\n                    options.resultType === 'base64') {\n                    const reader = new FileReader();\n                    reader.addEventListener('load', () => {\n                        if (options.resultType === 'dataUrl') {\n                            resolve({\n                                dataUrl: reader.result,\n                                format,\n                            });\n                        }\n                        else if (options.resultType === 'base64') {\n                            const b64 = reader.result.split(',')[1];\n                            resolve({\n                                base64String: b64,\n                                format,\n                            });\n                        }\n                        cleanup();\n                    });\n                    reader.readAsDataURL(file);\n                }\n                else {\n                    resolve({\n                        webPath: URL.createObjectURL(file),\n                        format: format,\n                    });\n                    cleanup();\n                }\n            });\n        }\n        input.accept = 'image/*';\n        input.capture = true;\n        if (options.source === CameraSource.Photos ||\n            options.source === CameraSource.Prompt) {\n            input.removeAttribute('capture');\n        }\n        else if (options.direction === CameraDirection.Front) {\n            input.capture = 'user';\n        }\n        else if (options.direction === CameraDirection.Rear) {\n            input.capture = 'environment';\n        }\n        input.click();\n    }\n    _getCameraPhoto(photo, options) {\n        return new Promise((resolve, reject) => {\n            const reader = new FileReader();\n            const format = photo.type.split('/')[1];\n            if (options.resultType === 'uri') {\n                resolve({\n                    webPath: URL.createObjectURL(photo),\n                    format: format,\n                });\n            }\n            else {\n                reader.readAsDataURL(photo);\n                reader.onloadend = () => {\n                    const r = reader.result;\n                    if (options.resultType === 'dataUrl') {\n                        resolve({\n                            dataUrl: r,\n                            format: format,\n                        });\n                    }\n                    else {\n                        resolve({\n                            base64String: r.split(',')[1],\n                            format: format,\n                        });\n                    }\n                };\n                reader.onerror = e => {\n                    reject(e);\n                };\n            }\n        });\n    }\n    async checkPermissions() {\n        if (typeof navigator === 'undefined' || !navigator.permissions) {\n            throw this.unavailable('Permissions API not available in this browser');\n        }\n        try {\n            // https://developer.mozilla.org/en-US/docs/Web/API/Permissions/query\n            // the specific permissions that are supported varies among browsers that implement the\n            // permissions API, so we need a try/catch in case 'camera' is invalid\n            const permission = await window.navigator.permissions.query({\n                name: 'camera',\n            });\n            return {\n                camera: permission.state,\n                photos: 'granted',\n            };\n        }\n        catch (_a) {\n            throw this.unavailable('Camera permissions are not available in this browser');\n        }\n    }\n    async requestPermissions() {\n        throw this.unimplemented('Not implemented on web.');\n    }\n}\nconst Camera = new CameraWeb();\nexport { Camera };\n//# sourceMappingURL=web.js.map"]}}